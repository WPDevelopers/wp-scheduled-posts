<?php 
namespace WPSP;

class Post 
{
    public function __construct()
    {
        // Print modal HTML to footer of all editors + frontend
        add_action('admin_footer', [$this, 'post_modal_options']); // Classic + Gutenberg
        add_action('elementor/editor/footer', [$this, 'post_modal_options']); // Elementor

        add_action('add_meta_boxes', [$this, 'wpsp_add_metabox']);
    }

    public function wpsp_add_metabox() {
        add_meta_box(
            'wpsp_modal_metabox',
            __('SchedulePress', 'myplugin'),
            [$this, 'render_classic_metabox'],
            null, // applies to all post types
            'side',
            'default'
        );
    }
    
    public function render_classic_metabox($post) {
        echo '<button type="button" class="button button-primary" onclick="mypluginOpenModal()">' . esc_html__('Editor Panel', 'myplugin') . '</button>';
    }
    

    public function post_modal_options() {
        ?>
            <div id="wpsp-post-modal" class="ReactModal__Overlay ReactModal__Overlay--after-open">
                <div class="ReactModal__Content ReactModal__Content--after-open modal_wrapper">
                    <div class="modal-header">
                        <svg width="132" height="26" viewBox="0 0 132 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_3978_2499)">
                            <path d="M13.0227 25.5757C6.14736 25.5757 0.435547 19.9747 0.435547 12.9998C0.435547 6.02489 6.04158 0.423828 13.0227 0.423828C15.2439 0.423828 17.3594 0.952228 19.2634 2.11471C19.7922 2.43175 20.0038 3.17152 19.6865 3.69992C19.3691 4.22832 18.6287 4.43968 18.0998 4.12264C16.619 3.2772 14.8208 2.74879 13.1285 2.74879C7.52242 2.74879 2.97413 7.29305 2.97413 12.8941C2.97413 18.4952 7.52242 23.0394 13.1285 23.0394C15.9844 23.0394 18.6287 21.8769 20.5327 19.869C20.9558 19.3406 21.8019 19.3406 22.225 19.7633C22.7539 20.1861 22.7539 21.0315 22.3308 21.4542C19.898 24.2019 16.5132 25.5757 13.0227 25.5757Z" fill="url(#paint0_radial_3978_2499)"/>
                            <path d="M11.542 10.6748L9.00345 8.34986C8.47458 7.92714 7.73416 7.92713 7.31106 8.45553C6.88797 8.98394 6.88797 9.7237 7.41684 10.1464L10.167 12.6827C10.2727 11.7316 10.8016 11.0975 11.542 10.6748Z" fill="#24E2AC"/>
                            <path d="M26.7735 3.17142C26.3504 2.64302 25.61 2.53734 25.0811 2.96006L15.2441 10.7804C15.8788 11.3088 16.4077 11.9429 16.5134 12.7883L26.562 4.8623C27.1966 4.43958 27.1966 3.69982 26.7735 3.17142Z" fill="#24E2AC"/>
                            <path d="M14.3981 11.52C14.0808 11.3086 13.7635 11.3086 13.3404 11.3086C13.0231 11.3086 12.7058 11.4143 12.3884 11.52C11.648 11.837 11.1191 12.5768 11.1191 13.5279V13.6336C11.2249 14.796 12.1769 15.6415 13.3404 15.6415C14.5039 15.6415 15.3501 14.796 15.4559 13.7392C15.4559 13.6336 15.4559 13.5279 15.4559 13.5279C15.4559 12.5768 15.0328 11.837 14.3981 11.52Z" fill="#3DEAB5"/>
                            <path d="M29.6289 10.252H26.5615C26.3499 10.252 26.2441 10.4633 26.2441 10.569V13.211C26.2441 13.4224 26.4557 13.528 26.5615 13.528H29.6289C29.8405 13.528 29.9462 13.3167 29.9462 13.211V10.569C30.052 10.4633 29.8405 10.252 29.6289 10.252Z" fill="#6C62FF"/>
                            <path d="M24.7637 10.252H21.6962C21.4847 10.252 21.3789 10.4633 21.3789 10.569V13.211C21.3789 13.4224 21.5905 13.528 21.6962 13.528H24.7637C24.9752 13.528 25.081 13.3167 25.081 13.211V10.569C25.081 10.4633 24.9752 10.252 24.7637 10.252Z" fill="#CCCCFF"/>
                            <path d="M24.7637 14.6914H21.6962C21.4847 14.6914 21.3789 14.9028 21.3789 15.0084V17.6505C21.3789 17.8618 21.5905 17.9675 21.6962 17.9675H24.7637C24.9752 17.9675 25.081 17.7561 25.081 17.6505V15.0084C25.081 14.9028 24.9752 14.6914 24.7637 14.6914Z" fill="#CCCCFF"/>
                            <path d="M29.6289 14.6914H26.5615C26.3499 14.6914 26.2441 14.9028 26.2441 15.0084V17.6505C26.2441 17.8618 26.4557 17.9675 26.5615 17.9675H29.6289C29.8405 17.9675 29.9462 17.7561 29.9462 17.6505V15.0084C30.052 14.9028 29.8405 14.6914 29.6289 14.6914Z" fill="#CCCCFF"/>
                            <path d="M42.1396 17.9127C40.8703 17.9127 39.8126 17.7013 38.7548 17.4899V16.0104C39.7068 16.3275 40.8703 16.5388 42.1396 16.5388C43.832 16.5388 44.5724 16.0104 44.5724 14.8479C44.5724 14.2139 44.2551 13.5798 42.9858 13.5798H41.3992C39.3895 13.5798 38.4375 12.7343 38.4375 10.8321C38.4375 8.82417 39.8126 7.87305 42.7742 7.87305C43.832 7.87305 44.8897 8.08441 45.9475 8.29577V9.66961C44.9955 9.35257 43.9378 9.14121 42.7742 9.14121C40.9761 9.14121 40.0241 9.66961 40.0241 10.7264C40.0241 11.5719 40.4472 11.9946 41.3992 11.9946H42.9858C45.1013 11.9946 46.159 12.84 46.159 14.7423C46.159 16.8559 44.8897 17.9127 42.1396 17.9127Z" fill="#303042"/>
                            <path d="M51.3414 17.8073C48.697 17.8073 47.4277 16.5392 47.4277 14.1085C47.4277 11.7836 48.697 10.6211 51.3414 10.6211C51.976 10.6211 52.5049 10.7268 53.1396 10.8325V12.1006C52.6107 11.9949 51.976 11.8893 51.4472 11.8893C49.8605 11.8893 49.1201 12.629 49.1201 14.1085C49.1201 15.7994 49.9663 16.6449 51.4472 16.6449C51.976 16.6449 52.5049 16.5392 53.1396 16.4335V17.7017C52.6107 17.7017 51.976 17.8073 51.3414 17.8073Z" fill="#303042"/>
                            <path d="M59.5922 17.807V13.2627C59.5922 12.3116 59.1691 11.8889 58.2171 11.8889C57.5825 11.8889 56.9478 12.1003 56.3132 12.6287V17.807H54.7266V7.87305H56.3132V11.7832L56.5247 11.5718C57.0536 10.9378 57.794 10.6207 58.6402 10.6207C60.3326 10.6207 61.1788 11.4662 61.1788 13.2627V17.807H59.5922Z" fill="#303042"/>
                            <path d="M66.8902 17.8073C64.2459 17.8073 62.9766 16.6449 62.9766 14.1085C62.9766 11.5722 64.0343 10.6211 66.3613 10.6211C68.6884 10.6211 69.6403 11.6779 69.6403 14.0029C69.6403 14.2142 69.6403 14.5313 69.6403 14.7426H64.6689V14.8483C64.6689 16.0108 65.5151 16.5392 67.1018 16.5392C67.8422 16.5392 68.4768 16.4335 69.2172 16.3278V17.596C68.4768 17.7017 67.7364 17.8073 66.8902 17.8073ZM66.2556 11.7836C65.1978 11.7836 64.5632 12.4177 64.4574 13.4745V13.5801H67.948V13.3688C68.0537 12.4177 67.4191 11.7836 66.2556 11.7836Z" fill="#303042"/>
                            <path d="M74.4007 17.8072C72.0737 17.8072 70.9102 16.539 70.9102 14.0027C70.9102 11.6777 72.0737 10.5153 74.2949 10.5153C74.8238 10.5153 75.2469 10.6209 75.7758 10.8323L75.9873 10.938V7.76758H77.5739V17.2788C76.5162 17.7015 75.4585 17.8072 74.4007 17.8072ZM74.4007 11.8891C73.1314 11.8891 72.4968 12.6289 72.4968 14.0027C72.4968 15.6936 73.1314 16.4334 74.5065 16.4334C75.0354 16.4334 75.4585 16.3277 75.9873 16.222H76.0931V12.3118H75.9873C75.5642 11.9948 75.0354 11.8891 74.4007 11.8891Z" fill="#303042"/>
                            <path d="M84.1322 17.8073L83.9206 16.7505L83.7091 16.8562C82.8629 17.4903 82.0167 17.8073 81.0647 17.8073C79.5839 17.8073 78.9492 16.9619 78.9492 15.271V10.6211H80.5358V15.1653C80.5358 16.3278 81.1705 16.5392 81.6994 16.5392C82.334 16.5392 82.9686 16.3278 83.7091 15.7994V10.6211H85.2957V17.8073H84.1322Z" fill="#303042"/>
                            <path d="M88.6804 7.87305H87.0938V17.807H88.6804V7.87305Z" fill="#303042"/>
                            <path d="M93.9683 18.1238C91.324 18.1238 90.0547 16.9613 90.0547 14.4249C90.0547 11.8886 91.1124 10.9375 93.4395 10.9375C95.7665 10.9375 96.7185 11.9943 96.7185 14.3193C96.7185 14.5306 96.7185 14.8477 96.7185 15.059H91.7471V15.1647C91.7471 16.3272 92.5933 16.8556 94.1799 16.8556C94.9203 16.8556 95.5549 16.7499 96.2954 16.6442V17.9124C95.6607 18.1238 94.9203 18.1238 93.9683 18.1238ZM93.4395 12.2057C92.3817 12.2057 91.7471 12.8397 91.6413 13.8965V14.0022H95.1319V13.7909C95.1319 12.7341 94.4972 12.2057 93.4395 12.2057Z" fill="#303042"/>
                            <path d="M97.9883 18.1234V8.18945H102.431C104.441 8.18945 105.392 9.03489 105.392 10.9371C105.392 12.9451 104.017 14.1075 101.373 14.5303L101.162 13.1564C102.854 12.8394 103.7 12.0996 103.7 11.0428C103.7 10.0917 103.171 9.66897 102.325 9.66897H99.6807V18.1234H97.9883Z" fill="#303042"/>
                            <path d="M106.768 18.124V10.9377H108.037L108.248 11.9945L108.46 11.7832C109.095 11.2548 109.623 10.9377 110.364 10.832V12.1002C109.729 12.1002 109.095 12.4172 108.46 13.0513V18.124H106.768Z" fill="#303042"/>
                            <path d="M114.701 18.1238C112.056 18.1238 110.787 16.9613 110.787 14.4249C110.787 11.8886 111.845 10.9375 114.172 10.9375C116.499 10.9375 117.451 11.9943 117.451 14.3193C117.451 14.5306 117.451 14.8477 117.451 15.059H112.479V15.1647C112.479 16.3272 113.326 16.8556 114.912 16.8556C115.653 16.8556 116.287 16.7499 117.028 16.6442V17.9124C116.393 18.1238 115.653 18.1238 114.701 18.1238ZM114.172 12.2057C113.114 12.2057 112.479 12.8397 112.374 13.8965V14.0022H115.864V13.7909C115.864 12.7341 115.335 12.2057 114.172 12.2057Z" fill="#303042"/>
                            <path d="M121.469 18.2297C120.518 18.2297 119.566 18.124 118.825 17.8069V16.5388C119.671 16.8558 120.518 16.9615 121.575 16.9615C122.739 16.9615 122.95 16.4331 122.95 16.0104C122.95 15.5876 122.739 15.1649 121.998 15.1649H120.623C119.142 15.1649 118.508 14.4252 118.508 13.0513C118.508 11.6775 119.566 10.832 121.681 10.832C122.527 10.832 123.479 10.9377 124.22 11.2548V12.5229C123.479 12.2059 122.527 12.1002 121.681 12.1002C120.623 12.1002 119.989 12.4172 119.989 13.0513C119.989 13.474 120.2 13.8968 121.046 13.8968H122.21C123.797 13.8968 124.537 14.6365 124.537 16.0104C124.537 17.4899 123.585 18.2297 121.469 18.2297Z" fill="#303042"/>
                            <path d="M128.452 18.2297C127.5 18.2297 126.548 18.124 125.808 17.8069V16.5388C126.654 16.8558 127.5 16.9615 128.558 16.9615C129.721 16.9615 129.933 16.4331 129.933 16.0104C129.933 15.5876 129.721 15.1649 128.981 15.1649H127.606C126.125 15.1649 125.49 14.4252 125.49 13.0513C125.49 11.6775 126.548 10.832 128.663 10.832C129.51 10.832 130.462 10.9377 131.202 11.2548V12.5229C130.462 12.2059 129.51 12.1002 128.663 12.1002C127.606 12.1002 126.971 12.4172 126.971 13.0513C126.971 13.474 127.183 13.8968 128.029 13.8968H129.192C130.779 13.8968 131.519 14.6365 131.519 16.0104C131.414 17.4899 130.462 18.2297 128.452 18.2297Z" fill="#303042"/>
                            </g>
                            <defs>
                            <radialGradient id="paint0_radial_3978_2499" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(21.6749 20.0514) scale(10.3999 10.3906)">
                            <stop stop-color="#F3F3FF"/>
                            <stop offset="0.09" stop-color="#E3E2FF"/>
                            <stop offset="0.4" stop-color="#B0ACFF"/>
                            <stop offset="0.66" stop-color="#8B84FF"/>
                            <stop offset="0.87" stop-color="#746CFF"/>
                            <stop offset="1" stop-color="#6C63FF"/>
                            </radialGradient>
                            <clipPath id="clip0_3978_2499">
                            <rect width="131.556" height="25.6" fill="white" transform="translate(0.199219 0.199219)"/>
                            </clipPath>
                            </defs>
                        </svg>
                    </div>
                    <div class="modal-body">
                        <div class="scheduling--wrapper">
                            <h2 class="title">Scheduling Settings</h2>
                            <div class="wpsp-post--card">
                                <div class="card--title">
                                    <h4 class="title">Auto Schedule</h4>
                                    <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="9" cy="9.5" r="9" fill="#FFEEE0"/>
                                        <path d="M4.06398 11.3651C3.83586 9.88232 3.60775 8.39961 3.37964 6.91686C3.32905 6.58817 3.70304 6.364 3.96906 6.56353C4.67976 7.09656 5.39043 7.62955 6.10113 8.16257C6.33513 8.33807 6.6685 8.28096 6.83073 8.03758L8.60571 5.37508C8.79329 5.09372 9.20669 5.09372 9.39426 5.37508L11.1693 8.03758C11.3315 8.28096 11.6649 8.33803 11.8989 8.16257C12.6096 7.62955 13.3202 7.09656 14.0309 6.56353C14.2969 6.364 14.6709 6.58817 14.6204 6.91686C14.3923 8.39961 14.1642 9.88232 13.936 11.3651H4.06398Z" fill="#FFA454"/>
                                        <path d="M13.4218 13.8328H4.57914C4.29489 13.8328 4.06445 13.6024 4.06445 13.3181V12.1875H13.9365V13.3181C13.9365 13.6024 13.706 13.8328 13.4218 13.8328Z" fill="#FFA454"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="social-share--wrapper">
                            <h2 class="title">Social Share Settings</h2>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button class="btn secondary-btn">Save Settings</button>
                        <button class="btn primary-btn">Share Now</button>
                    </div>
                    
                </div>
            </div>
        <?php
    }
    
}
